@model Finalproj.Models.Paiol

@{
    ViewData["Title"] = "Detalhes do Paiol";
}

<h1>Detalhes do Paiol</h1>

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Nome)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Nome)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Localizacao)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Localizacao)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.LimiteMLE)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.LimiteMLE) kg (Teto de Segurança NEM)</dd>

        <dt class="col-sm-2">Perfil de Risco</dt>
        <dd class="col-sm-10">@Model?.PerfilRisco</dd>

        <dt class="col-sm-2">Estado</dt>
        <dd class="col-sm-10">@Model?.Estado</dd>

        <dt class="col-sm-2">Cargos com acesso</dt>
        <dd class="col-sm-10">@(ViewData["CargosAcesso"] is IList<string> cargos && cargos.Any() ? string.Join(", ", cargos) : "Nenhum cargo definido")</dd>

        <dt class="col-sm-2">NEM atual (kg)</dt>
        <dd class="col-sm-10">@(ViewData["NEMAtual"] is decimal nem ? nem.ToString("N2") : "0,00") / @(Model?.LimiteMLE.ToString("N2")) (teto)</dd>
    </dl>
</div>
@if (ViewData["Carga"] is IEnumerable<Finalproj.Models.CargaPaiolItem> carga && carga.Any())
{
    <h5 class="mt-3">Carga no paiol (stock atual)</h5>
    <table class="table table-sm">
        <thead><tr><th>Produto</th><th>Quantidade</th><th>NEM (kg)</th></tr></thead>
        <tbody>
            @foreach (var x in carga)
            {
                <tr>
                    <td>@x.ProdutoNome</td>
                    <td>@x.Quantidade.ToString("N2")</td>
                    <td>@x.NEMTotal.ToString("N2")</td>
                </tr>
            }
        </tbody>
    </table>
}
<div>
    <a asp-action="Conteudo" asp-route-id="@Model?.Id" class="btn btn-outline-primary btn-sm">Ver conteúdo do paiol</a>
    <a asp-action="Index" class="btn btn-outline-secondary btn-sm">Voltar ao Armazém</a>
</div>
